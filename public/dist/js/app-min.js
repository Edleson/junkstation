var app=angular.module("junkstation",["ngRoute","ngResource","ngAnimate","ngMessages","ngDialog","ui.utils.masks"]);app.config(["ngDialogProvider",function(ngDialogProvider){ngDialogProvider.setDefaults({className:"ngdialog-theme-default",plain:false,showClose:true,closeByDocument:true,closeByEscape:true,appendTo:false,preCloseCallback:function(){}})}]);app.factory("utilsService",function(){var _listarSituacao=function(){return new Array({nome:"Ativo",valor:true},{nome:"Inativo",valor:false})};return{listarSituacao:_listarSituacao}});app.factory("anoFabricacaoService",function($http){var baseAdminURL="/admin/";var root="anoFabricacao/";var _findAll=function(){return $http.get(baseAdminURL+root)};var _create=function(entity){return $http.post(baseAdminURL+root,entity)};var _update=function(entity){return $http.put(baseAdminURL+root,entity)};var _destroy=function(entity){return $http({method:"DELETE",url:baseAdminURL+root+entity._id})};return{findAll:_findAll,create:_create,update:_update,destroy:_destroy}});app.factory("cambioService",function($http){var baseAdminURL="/admin/";var root="cambio/";var _findAll=function(){return $http.get(baseAdminURL+root)};var _create=function(entity){return $http.post(baseAdminURL+root,entity)};var _update=function(entity){return $http.put(baseAdminURL+root,entity)};var _destroy=function(entity){return $http({method:"DELETE",url:baseAdminURL+root+entity._id})};return{findAll:_findAll,create:_create,update:_update,destroy:_destroy}});app.factory("categoriaService",function($http){var baseAdminURL="/admin/";var root="categoria/";var _findAll=function(){return $http.get(baseAdminURL+root)};var _create=function(entity){return $http.post(baseAdminURL+root,entity)};var _update=function(entity){return $http.put(baseAdminURL+root,entity)};var _destroy=function(entity){return $http({method:"DELETE",url:baseAdminURL+root+entity._id})};return{findAll:_findAll,create:_create,update:_update,destroy:_destroy}});app.factory("combustivelService",function($http){var baseAdminURL="/admin/";var root="combustivel/";var _findAll=function(){return $http.get(baseAdminURL+root)};var _create=function(entity){return $http.post(baseAdminURL+root,entity)};var _update=function(entity){return $http.put(baseAdminURL+root,entity)};var _destroy=function(entity){return $http({method:"DELETE",url:baseAdminURL+root+entity._id})};return{findAll:_findAll,create:_create,update:_update,destroy:_destroy}});app.factory("corService",function($http){var baseAdminURL="/admin/";var root="cor/";var _findAll=function(){return $http.get(baseAdminURL+root)};var _create=function(entity){return $http.post(baseAdminURL+root,entity)};var _update=function(entity){return $http.put(baseAdminURL+root,entity)};var _destroy=function(entity){return $http({method:"DELETE",url:baseAdminURL+root+entity._id})};return{findAll:_findAll,create:_create,update:_update,destroy:_destroy}});app.factory("estiloService",function($http){var baseAdminURL="/admin/";var root="estilo/";var _findAll=function(){return $http.get(baseAdminURL+root)};var _create=function(entity){return $http.post(baseAdminURL+root,entity)};var _update=function(entity){return $http.put(baseAdminURL+root,entity)};var _destroy=function(entity){return $http({method:"DELETE",url:baseAdminURL+root+entity._id})};return{findAll:_findAll,create:_create,update:_update,destroy:_destroy}});app.factory("marcaService",function($http){var baseAdminURL="/admin/";var root="marca/";var _findAll=function(){return $http.get(baseAdminURL+root)};var _create=function(entity){return $http.post(baseAdminURL+root,entity)};var _update=function(entity){return $http.put(baseAdminURL+root,entity)};var _destroy=function(entity){return $http({method:"DELETE",url:baseAdminURL+root+entity._id})};return{findAll:_findAll,create:_create,update:_update,destroy:_destroy}});app.factory("modeloService",function($http){var baseAdminURL="/admin/";var root="modelo/";var _findAll=function(){return $http.get(baseAdminURL+root)};var _create=function(entity){return $http.post(baseAdminURL+root,entity)};var _update=function(entity){return $http.put(baseAdminURL+root,entity)};var _destroy=function(entity){return $http({method:"DELETE",url:baseAdminURL+root+entity._id})};return{findAll:_findAll,create:_create,update:_update,destroy:_destroy}});app.factory("newsletterService",function($http){var baseAdminURL="/admin/";var root="newsletter/";var _findAll=function(){return $http.get(baseAdminURL+root)};var _create=function(entity){return $http.post(baseAdminURL+root,entity)};var _update=function(entity){return $http.put(baseAdminURL+root,entity)};var _destroy=function(entity){return $http({method:"DELETE",url:baseAdminURL+root+entity._id})};return{findAll:_findAll,create:_create,update:_update,destroy:_destroy}});app.factory("servicoService",function($http){var baseAdminURL="/admin/";var root="servico/";var _findAll=function(){return $http.get(baseAdminURL+root)};var _create=function(entity){return $http.post(baseAdminURL+root,entity)};var _update=function(entity){return $http.put(baseAdminURL+root,entity)};var _destroy=function(entity){return $http({method:"DELETE",url:baseAdminURL+root+entity._id})};return{findAll:_findAll,create:_create,update:_update,destroy:_destroy}});app.factory("ufService",function($http){var baseAdminURL="/admin/";var root="uf/";var _findAll=function(){return $http.get(baseAdminURL+root)};var _create=function(entity){return $http.post(baseAdminURL+root,entity)};var _update=function(entity){return $http.put(baseAdminURL+root,entity)};var _destroy=function(entity){return $http({method:"DELETE",url:baseAdminURL+root+entity._id})};return{findAll:_findAll,create:_create,update:_update,destroy:_destroy}});app.factory("planosService",function($http){var baseAdminURL="/admin/";var root="planos/";var _findAll=function(){return $http.get(baseAdminURL+root)};var _create=function(entity){return $http.post(baseAdminURL+root,entity)};var _update=function(entity){return $http.put(baseAdminURL+root,entity)};var _destroy=function(entity){return $http({method:"DELETE",url:baseAdminURL+root+entity._id})};return{findAll:_findAll,create:_create,update:_update,destroy:_destroy}});app.factory("anuncioService",function($http){var baseAdminURL="/admin/";var root="anuncio/";var _findAll=function(){return $http.get(baseAdminURL+root+"list")};var _findAllAnunciantes=function(){return $http.get(baseAdminURL+root+"anunciante")};return{findAll:_findAll,findAllAnunciantes:_findAllAnunciantes}});app.factory("userService",function($http){var baseAdminURL="/admin/";var root="users/";var _findAll=function(){return $http.get(baseAdminURL+root)};var _update=function(entity){return $http.put(baseAdminURL+root,entity)};var _destroy=function(entity){return $http({method:"DELETE",url:baseAdminURL+root+entity._id})};return{findAll:_findAll,update:_update,destroy:_destroy}});app.controller("adminController",["$scope",function($scope){$scope.test="TESTE"}]);app.controller("anoFabricacaoController",function($scope,anoFabricacaoService,$rootScope,ngDialog,situacoes){$scope.entities=[];$scope.entity={};$scope.situacoes=situacoes;var Service=anoFabricacaoService;var findAll=function(){Service.findAll().success(function(response,status){$scope.entities=response.data}).error(function(response){showGrowl(response.header.error.code+" : "+response.header.error.errmsg,response.header.message,6e3)})};$scope.createOrUpdate=function(entity){showBlockUI({message:"Carregando ..."});if(entity._id){Service.update(entity).success(function(response,status){delete $scope.entity;$scope.entityForm.$setPristine();findAll();showGrowl("Notificação !","Ano "+entity.ano+" atualizada com sucesso !",6e3)}).error(function(response){showGrowl(response.header.error.code+" : "+response.header.error.errmsg,response.header.message,6e3)})}else{Service.create(entity).success(function(response,status){delete $scope.entity;$scope.entityForm.$setPristine();findAll();showGrowl("Notificação !","Ano "+entity.ano+" criada com sucesso!",6e3)}).error(function(response){showGrowl(response.header.error.code+" : "+response.header.error.errmsg,response.header.message,6e3)})}};$scope.destroy=function(entity){ngDialog.openConfirm({template:"modalDialogId",className:"ngdialog-theme-default"}).then(function(value){Service.destroy(entity).success(function(response,status){showGrowl(null,"Ano "+entity.ano+" excluído com sucesso !",6e3);delete $scope.entity;findAll()}).error(function(response){showGrowl(response.header.error.code+" : "+response.header.error.errmsg,response.header.message,6e3)})},function(reason){console.log("Modal promise rejected. Reason: ",reason)})};$scope.selectEntity=function(entity){$scope.entity=angular.copy(entity)};$scope.orderBy=function(ordenacao){$scope.ordenacao=ordenacao;$scope.direcao=!$scope.direcao};findAll()});app.controller("cambioController",function($scope,cambioService,$rootScope,ngDialog,situacoes){$scope.entities=[];$scope.entity={};$scope.situacoes=situacoes;var Service=cambioService;var findAll=function(){Service.findAll().success(function(response,status){$scope.entities=response.data}).error(function(response){showGrowl(response.header.error.code+" : "+response.header.error.errmsg,response.header.message,6e3)})};$scope.createOrUpdate=function(entity){showBlockUI({message:"Carregando ..."});if(entity._id){Service.update(entity).success(function(response,status){delete $scope.entity;$scope.entityForm.$setPristine();findAll();showGrowl("Notificação !","Câmbio "+entity.nome+" atualizada com sucesso !",6e3)}).error(function(response){showGrowl(response.header.error.code+" : "+response.header.error.errmsg,response.header.message,6e3)})}else{Service.create(entity).success(function(response,status){delete $scope.entity;$scope.entityForm.$setPristine();findAll();showGrowl("Notificação !","Câmbio "+entity.nome+" criada com sucesso!",6e3)}).error(function(response){showGrowl(response.header.error.code+" : "+response.header.error.errmsg,response.header.message,6e3)})}};$scope.destroy=function(entity){ngDialog.openConfirm({template:"modalDialogId",className:"ngdialog-theme-default"}).then(function(value){Service.destroy(entity).success(function(response,status){showGrowl(null,"Câmbio "+entity.nome+" excluído com sucesso !",6e3);delete $scope.entity;findAll()}).error(function(response){showGrowl(response.header.error.code+" : "+response.header.error.errmsg,response.header.message,6e3)})},function(reason){console.log("Modal promise rejected. Reason: ",reason)})};$scope.selectEntity=function(entity){$scope.entity=angular.copy(entity)};$scope.orderBy=function(ordenacao){$scope.ordenacao=ordenacao;$scope.direcao=!$scope.direcao};findAll()});app.controller("categoriaController",function($scope,categoriaService,$rootScope,ngDialog,situacoes){$scope.entities=[];$scope.entity={};$scope.situacoes=situacoes;var Service=categoriaService;var findAll=function(){Service.findAll().success(function(response,status){$scope.entities=response.data}).error(function(response){showGrowl(response.header.error.code+" : "+response.header.error.errmsg,response.header.message,6e3)})};$scope.createOrUpdate=function(entity){showBlockUI({message:"Carregando ..."});if(entity._id){Service.update(entity).success(function(response,status){delete $scope.entity;$scope.entityForm.$setPristine();findAll();showGrowl("Notificação !","Categoria "+entity.nome+" atualizada com sucesso !",6e3)}).error(function(response){showGrowl(response.header.error.code+" : "+response.header.error.errmsg,response.header.message,6e3)})}else{Service.create(entity).success(function(response,status){delete $scope.entity;$scope.entityForm.$setPristine();findAll();showGrowl("Notificação !","Categoria "+entity.nome+" criada com sucesso!",6e3)}).error(function(response){showGrowl(response.header.error.code+" : "+response.header.error.errmsg,response.header.message,6e3)})}};$scope.destroy=function(entity){ngDialog.openConfirm({template:"modalDialogId",className:"ngdialog-theme-default"}).then(function(value){Service.destroy(entity).success(function(response,status){showGrowl(null,"Categoria "+entity.nome+" excluído com sucesso !",6e3);delete $scope.entity;findAll()}).error(function(response){showGrowl(response.header.error.code+" : "+response.header.error.errmsg,response.header.message,6e3)})},function(reason){console.log("Modal promise rejected. Reason: ",reason)})};$scope.selectEntity=function(entity){$scope.entity=angular.copy(entity)};$scope.orderBy=function(ordenacao){$scope.ordenacao=ordenacao;$scope.direcao=!$scope.direcao};findAll()});app.controller("combustivelController",function($scope,combustivelService,$rootScope,ngDialog,situacoes){$scope.entities=[];$scope.entity={};$scope.situacoes=situacoes;var Service=combustivelService;var findAll=function(){Service.findAll().success(function(response,status){$scope.entities=response.data}).error(function(response){showGrowl(response.header.error.code+" : "+response.header.error.errmsg,response.header.message,6e3)})};$scope.createOrUpdate=function(entity){showBlockUI({message:"Carregando ..."});if(entity._id){Service.update(entity).success(function(response,status){delete $scope.entity;$scope.entityForm.$setPristine();findAll();showGrowl("Notificação !","Combustível "+entity.nome+" atualizada com sucesso !",6e3)}).error(function(response){showGrowl(response.header.error.code+" : "+response.header.error.errmsg,response.header.message,6e3)})}else{Service.create(entity).success(function(response,status){delete $scope.entity;$scope.entityForm.$setPristine();findAll();showGrowl("Notificação !","Combustível "+entity.nome+" criada com sucesso!",6e3)}).error(function(response){showGrowl(response.header.error.code+" : "+response.header.error.errmsg,response.header.message,6e3)})}};$scope.destroy=function(entity){ngDialog.openConfirm({template:"modalDialogId",className:"ngdialog-theme-default"}).then(function(value){Service.destroy(entity).success(function(response,status){showGrowl(null,"Combustível "+entity.nome+" excluído com sucesso !",6e3);delete $scope.entity;findAll()}).error(function(response){showGrowl(response.header.error.code+" : "+response.header.error.errmsg,response.header.message,6e3)})},function(reason){console.log("Modal promise rejected. Reason: ",reason)})};$scope.selectEntity=function(entity){$scope.entity=angular.copy(entity)};$scope.orderBy=function(ordenacao){$scope.ordenacao=ordenacao;$scope.direcao=!$scope.direcao};findAll()});app.controller("corController",function($scope,corService,$rootScope,ngDialog,situacoes){$scope.entities=[];$scope.entity={};$scope.situacoes=situacoes;var Service=corService;var findAll=function(){Service.findAll().success(function(response,status){$scope.entities=response.data}).error(function(response){showGrowl(response.header.error.code+" : "+response.header.error.errmsg,response.header.message,6e3)})};$scope.createOrUpdate=function(entity){showBlockUI({message:"Carregando ..."});if(entity._id){Service.update(entity).success(function(response,status){delete $scope.entity;$scope.entityForm.$setPristine();findAll();showGrowl("Notificação !","Cor "+entity.nome+" atualizada com sucesso !",6e3)}).error(function(response){showGrowl(response.header.error.code+" : "+response.header.error.errmsg,response.header.message,6e3)})}else{Service.create(entity).success(function(response,status){delete $scope.entity;$scope.entityForm.$setPristine();findAll();showGrowl("Notificação !","Cor "+entity.nome+" criada com sucesso!",6e3)}).error(function(response){showGrowl(response.header.error.code+" : "+response.header.error.errmsg,response.header.message,6e3)})}};$scope.destroy=function(entity){ngDialog.openConfirm({template:"modalDialogId",className:"ngdialog-theme-default"}).then(function(value){Service.destroy(entity).success(function(response,status){showGrowl(null,"Cor "+entity.nome+" excluído com sucesso !",6e3);delete $scope.entity;findAll()}).error(function(response){showGrowl(response.header.error.code+" : "+response.header.error.errmsg,response.header.message,6e3)})},function(reason){console.log("Modal promise rejected. Reason: ",reason)})};$scope.selectEntity=function(entity){$scope.entity=angular.copy(entity)};$scope.orderBy=function(ordenacao){$scope.ordenacao=ordenacao;$scope.direcao=!$scope.direcao};findAll()});app.controller("estiloController",function($scope,estiloService,$rootScope,ngDialog,situacoes){$scope.entities=[];$scope.entity={};$scope.situacoes=situacoes;var Service=estiloService;var findAll=function(){Service.findAll().success(function(response,status){$scope.entities=response.data}).error(function(response){showGrowl(response.header.error.code+" : "+response.header.error.errmsg,response.header.message,6e3)})};$scope.createOrUpdate=function(entity){showBlockUI({message:"Carregando ..."});if(entity._id){Service.update(entity).success(function(response,status){delete $scope.entity;$scope.entityForm.$setPristine();findAll();showGrowl("Notificação !","Estilo "+entity.nome+" atualizada com sucesso !",6e3)}).error(function(response){showGrowl(response.header.error.code+" : "+response.header.error.errmsg,response.header.message,6e3)})}else{Service.create(entity).success(function(response,status){delete $scope.entity;$scope.entityForm.$setPristine();findAll();showGrowl("Notificação !","Estilo "+entity.nome+" criada com sucesso!",6e3)}).error(function(response){showGrowl(response.header.error.code+" : "+response.header.error.errmsg,response.header.message,6e3)})}};$scope.destroy=function(entity){ngDialog.openConfirm({template:"modalDialogId",className:"ngdialog-theme-default"}).then(function(value){Service.destroy(entity).success(function(response,status){showGrowl(null,"Estilo "+entity.nome+" excluído com sucesso !",6e3);delete $scope.entity;findAll()}).error(function(response){showGrowl(response.header.error.code+" : "+response.header.error.errmsg,response.header.message,6e3)})},function(reason){console.log("Modal promise rejected. Reason: ",reason)})};$scope.selectEntity=function(entity){$scope.entity=angular.copy(entity)};$scope.orderBy=function(ordenacao){$scope.ordenacao=ordenacao;$scope.direcao=!$scope.direcao};findAll()});app.controller("marcaController",function($scope,marcaService,$rootScope,ngDialog,situacoes,categorias){$scope.entities=[];$scope.entity={};$scope.categorias=categorias.data.data;$scope.situacoes=situacoes;var Service=marcaService;console.log(categorias.data.data);var findAll=function(){Service.findAll().success(function(response,status){$scope.entities=response.data}).error(function(response){showGrowl(response.header.error.code+" : "+response.header.error.errmsg,response.header.message,6e3)})};$scope.createOrUpdate=function(entity){showBlockUI({message:"Carregando ..."});if(entity._id){Service.update(entity).success(function(response,status){delete $scope.entity;$scope.entityForm.$setPristine();findAll();showGrowl("Notificação !","Marca "+entity.nome+" atualizada com sucesso !",6e3)}).error(function(response){showGrowl(response.header.error.code+" : "+response.header.error.errmsg,response.header.message,6e3)})}else{Service.create(entity).success(function(response,status){delete $scope.entity;$scope.entityForm.$setPristine();findAll();showGrowl("Notificação !","Marca "+entity.nome+" criada com sucesso!",6e3)}).error(function(response){showGrowl(response.header.error.code+" : "+response.header.error.errmsg,response.header.message,6e3)})}};$scope.destroy=function(entity){ngDialog.openConfirm({template:"modalDialogId",className:"ngdialog-theme-default"}).then(function(value){Service.destroy(entity).success(function(response,status){showGrowl(null,"Marca "+entity.nome+" excluído com sucesso !",6e3);delete $scope.entity;findAll()}).error(function(response){showGrowl(response.header.error.code+" : "+response.header.error.errmsg,response.header.message,6e3)})},function(reason){console.log("Modal promise rejected. Reason: ",reason)})};$scope.selectEntity=function(entity){$scope.entity=angular.copy(entity)};$scope.orderBy=function(ordenacao){$scope.ordenacao=ordenacao;$scope.direcao=!$scope.direcao};findAll()});app.controller("modeloController",function($scope,modeloService,$rootScope,ngDialog,situacoes,marcas){$scope.entities=[];$scope.entity={};$scope.situacoes=situacoes;$scope.marcas=marcas.data.data;var Service=modeloService;console.log(marcas);var findAll=function(){Service.findAll().success(function(response,status){$scope.entities=response.data}).error(function(response){showGrowl(response.header.error.code+" : "+response.header.error.errmsg,response.header.message,6e3)})};$scope.createOrUpdate=function(entity){showBlockUI({message:"Carregando ..."});if(entity._id){Service.update(entity).success(function(response,status){delete $scope.entity;$scope.entityForm.$setPristine();findAll();showGrowl("Notificação !","Modelo "+entity.nome+" atualizada com sucesso !",6e3)}).error(function(response){showGrowl(response.header.error.code+" : "+response.header.error.errmsg,response.header.message,6e3)})}else{Service.create(entity).success(function(response,status){delete $scope.entity;$scope.entityForm.$setPristine();findAll();showGrowl("Notificação !","Modelo "+entity.nome+" criada com sucesso!",6e3)}).error(function(response){showGrowl(response.header.error.code+" : "+response.header.error.errmsg,response.header.message,6e3)})}};$scope.destroy=function(entity){ngDialog.openConfirm({template:"modalDialogId",className:"ngdialog-theme-default"}).then(function(value){Service.destroy(entity).success(function(response,status){showGrowl(null,"Modelo "+entity.nome+" excluído com sucesso !",6e3);delete $scope.entity;findAll()}).error(function(response){showGrowl(response.header.error.code+" : "+response.header.error.errmsg,response.header.message,6e3)})},function(reason){console.log("Modal promise rejected. Reason: ",reason)})};$scope.selectEntity=function(entity){$scope.entity=angular.copy(entity)};$scope.orderBy=function(ordenacao){$scope.ordenacao=ordenacao;$scope.direcao=!$scope.direcao};findAll()});app.controller("newsletterController",function($scope,newsletterService,$rootScope,ngDialog,situacoes){$scope.entities=[];$scope.entity={};$scope.situacoes=situacoes;var Service=newsletterService;var findAll=function(){Service.findAll().success(function(response,status){$scope.entities=response.data}).error(function(response){showGrowl(response.header.error.code+" : "+response.header.error.errmsg,response.header.message,6e3)})};$scope.createOrUpdate=function(entity){showBlockUI({message:"Carregando ..."});if(entity._id){Service.update(entity).success(function(response,status){delete $scope.entity;$scope.entityForm.$setPristine();findAll();showGrowl("Notificação !","Newsletter "+entity.email+" atualizada com sucesso !",6e3)}).error(function(response){showGrowl(response.header.error.code+" : "+response.header.error.errmsg,response.header.message,6e3)})}else{Service.create(entity).success(function(response,status){delete $scope.entity;$scope.entityForm.$setPristine();findAll();showGrowl("Notificação !","Newsletter "+entity.email+" criada com sucesso!",6e3)}).error(function(response){showGrowl(response.header.error.code+" : "+response.header.error.errmsg,response.header.message,6e3)})}};$scope.destroy=function(entity){ngDialog.openConfirm({template:"modalDialogId",className:"ngdialog-theme-default"}).then(function(value){Service.destroy(entity).success(function(response,status){showGrowl(null,"Newsletter "+entity.email+" excluído com sucesso !",6e3);delete $scope.entity;findAll()}).error(function(response){showGrowl(response.header.error.code+" : "+response.header.error.errmsg,response.header.message,6e3)})},function(reason){console.log("Modal promise rejected. Reason: ",reason)})};$scope.selectEntity=function(entity){$scope.entity=angular.copy(entity)};$scope.orderBy=function(ordenacao){$scope.ordenacao=ordenacao;$scope.direcao=!$scope.direcao};findAll()});app.controller("servicoController",function($scope,servicoService,$rootScope,ngDialog,situacoes){$scope.entities=[];$scope.entity={};$scope.situacoes=situacoes;var Service=servicoService;var findAll=function(){Service.findAll().success(function(response,status){$scope.entities=response.data}).error(function(response){showGrowl(response.header.error.code+" : "+response.header.error.errmsg,response.header.message,6e3)})};$scope.createOrUpdate=function(entity){showBlockUI({message:"Carregando ..."});if(entity._id){Service.update(entity).success(function(response,status){delete $scope.entity;$scope.entityForm.$setPristine();findAll();showGrowl("Notificação !","Serviço "+entity.titulo+" atualizada com sucesso !",6e3)}).error(function(response){showGrowl(response.header.error.code+" : "+response.header.error.errmsg,response.header.message,6e3)})}else{Service.create(entity).success(function(response,status){delete $scope.entity;$scope.entityForm.$setPristine();findAll();showGrowl("Notificação !","Serviço "+entity.titulo+" criada com sucesso!",6e3)}).error(function(response){showGrowl(response.header.error.code+" : "+response.header.error.errmsg,response.header.message,6e3)})}};$scope.destroy=function(entity){ngDialog.openConfirm({template:"modalDialogId",className:"ngdialog-theme-default"}).then(function(value){Service.destroy(entity).success(function(response,status){showGrowl(null,"Serviço "+entity.titulo+" excluído com sucesso !",6e3);delete $scope.entity;findAll()}).error(function(response){showGrowl(response.header.error.code+" : "+response.header.error.errmsg,response.header.message,6e3)})},function(reason){console.log("Modal promise rejected. Reason: ",reason)})};$scope.selectEntity=function(entity){$scope.entity=angular.copy(entity)};$scope.orderBy=function(ordenacao){$scope.ordenacao=ordenacao;$scope.direcao=!$scope.direcao};findAll()});app.controller("planosController",function($scope,planosService,$rootScope,ngDialog,situacoes){$scope.entities=[];$scope.entity={};$scope.situacoes=situacoes;$scope.tipoPessoas=[{nome:"Física",valor:"PF"},{nome:"Jurídica",valor:"PJ"}];$scope.destaques=[{nome:"Sim",valor:true},{nome:"Não",valor:false}];var Service=planosService;var findAll=function(){Service.findAll().success(function(response,status){$scope.entities=response.data}).error(function(response){showGrowl(response.header.error.code+" : "+response.header.error.errmsg,response.header.message,6e3)})};$scope.createOrUpdate=function(entity){showBlockUI({message:"Carregando ..."});if(entity._id){Service.update(entity).success(function(response,status){delete $scope.entity;$scope.entityForm.$setPristine();findAll();showGrowl("Notificação !","Plano "+entity.titulo+" atualizada com sucesso !",6e3);$scope.showForm=false}).error(function(response){showGrowl(response.header.error.code+" : "+response.header.error.errmsg,response.header.message,6e3)})}else{Service.create(entity).success(function(response,status){delete $scope.entity;$scope.entityForm.$setPristine();findAll();showGrowl("Notificação !","Plano "+entity.titulo+" criada com sucesso!",6e3);$scope.showForm=false}).error(function(response){showGrowl(response.header.error.code+" : "+response.header.error.errmsg,response.header.message,6e3)})}};$scope.destroy=function(entity){ngDialog.openConfirm({template:"modalDialogId",className:"ngdialog-theme-default"}).then(function(value){Service.destroy(entity).success(function(response,status){showGrowl(null,"Plano "+entity.titulo+" excluído com sucesso !",6e3);delete $scope.entity;findAll()}).error(function(response){showGrowl(response.header.error.code+" : "+response.header.error.errmsg,response.header.message,6e3)})},function(reason){console.log("Modal promise rejected. Reason: ",reason)})};$scope.selectEntity=function(entity){$scope.entity=angular.copy(entity);$scope.showForm=true};$scope.orderBy=function(ordenacao){$scope.ordenacao=ordenacao;$scope.direcao=!$scope.direcao};findAll()});app.controller("ufController",function($scope,ufService,$rootScope,ngDialog,situacoes){$scope.entities=[];$scope.entity={};$scope.situacoes=situacoes;var Service=ufService;var findAll=function(){Service.findAll().success(function(response,status){$scope.entities=response.data}).error(function(response){showGrowl(response.header.error.code+" : "+response.header.error.errmsg,response.header.message,6e3)})};$scope.createOrUpdate=function(entity){showBlockUI({message:"Carregando ..."});if(entity._id){Service.update(entity).success(function(response,status){delete $scope.entity;$scope.entityForm.$setPristine();findAll();showGrowl("Notificação !","UF "+entity.nome+" atualizada com sucesso !",6e3)}).error(function(response){showGrowl(response.header.error.code+" : "+response.header.error.errmsg,response.header.message,6e3)})}else{Service.create(entity).success(function(response,status){delete $scope.entity;$scope.entityForm.$setPristine();findAll();showGrowl("Notificação !","UF "+entity.nome+" criada com sucesso!",6e3)}).error(function(response){showGrowl(response.header.error.code+" : "+response.header.error.errmsg,response.header.message,6e3)})}};$scope.destroy=function(entity){ngDialog.openConfirm({template:"modalDialogId",className:"ngdialog-theme-default"}).then(function(value){Service.destroy(entity).success(function(response,status){showGrowl(null,"UF "+entity.nome+" excluído com sucesso !",6e3);delete $scope.entity;findAll()}).error(function(response){showGrowl(response.header.error.code+" : "+response.header.error.errmsg,response.header.message,6e3)})},function(reason){console.log("Modal promise rejected. Reason: ",reason)})};$scope.selectEntity=function(entity){$scope.entity=angular.copy(entity)};$scope.orderBy=function(ordenacao){$scope.ordenacao=ordenacao;$scope.direcao=!$scope.direcao};findAll()});app.controller("anuncioController",function($scope,anuncioService,$rootScope,ngDialog){$scope.entities=[];var Service=anuncioService;var findAll=function(){Service.findAll().success(function(response,status){$scope.entities=response.data}).error(function(response){showGrowl(response.header.error.code+" : "+response.header.error.errmsg,response.header.message,6e3)})};$scope.orderBy=function(ordenacao){$scope.ordenacao=ordenacao;$scope.direcao=!$scope.direcao};findAll()});app.controller("userController",function($scope,userService,$rootScope,ngDialog){$scope.entities=[];var Service=userService;var findAll=function(){Service.findAll().success(function(response,status){$scope.entities=response.data}).error(function(response){showGrowl(response.header.error.code+" : "+response.header.error.errmsg,response.header.message,6e3)})};$scope.orderBy=function(ordenacao){$scope.ordenacao=ordenacao;$scope.direcao=!$scope.direcao};$scope.isAdmin=function(user){if(user){var isAdmin=user.perfil.filter(function(item){return item==="ADMIN"});return isAdmin.length>0}else{return false}};$scope.removeAdmin=function(user){$rootScope.msgTitle="Permissão de Administrador";$rootScope.msgBody="Tem certeza que quer retirar os poderes de administrador do usuário "+user.local.username;ngDialog.openConfirm({template:"modalDialogId",className:"ngdialog-theme-default"}).then(function(value){var notAdmin={};notAdmin._id=user._id;notAdmin.perfil=user.perfil.filter(function(item){return item!=="ADMIN"});user.perfil=notAdmin.perfil;Service.update(notAdmin);findAll()},function(reason){})};$scope.addAdmin=function(user){$rootScope.msgTitle="Permissão de Administrador";$rootScope.msgBody="Tem certeza quer dar poderes de administrador para o usuário "+user.local.username;ngDialog.openConfirm({template:"modalDialogId",className:"ngdialog-theme-default"}).then(function(value){var admin={};admin._id=user._id;admin.perfil=user.perfil;admin.perfil.push("ADMIN");Service.update(admin);findAll()},function(reason){})};findAll()});app.controller("anuncianteController",function($scope,anuncioService,$rootScope,ngDialog){$scope.entities=[];var Service=anuncioService;var findAll=function(){Service.findAllAnunciantes().success(function(response,status){$scope.entities=response.data}).error(function(response){showGrowl(response.header.error.code+" : "+response.header.error.errmsg,response.header.message,6e3);
})};$scope.orderBy=function(ordenacao){$scope.ordenacao=ordenacao;$scope.direcao=!$scope.direcao};findAll()});app.controller("uiAdminController",["$scope",function($scope){$scope.panels=[{title:"Cadastro Geral",opened:false,contentPanel:false,links:[{href:"#/marca",desc:"Gerenciar Marca"},{href:"#/categoria",desc:"Gerenciar Categoria"},{href:"#/modelo",desc:"Gerenciar Modelo"},{href:"#/combustivel",desc:"Gerenciar Combustível"},{href:"#/cor",desc:"Gerenciar Cor"},{href:"#/cambio",desc:"Gerenciar Cambio"},{href:"#/anoFabricacao",desc:"Gerenciar Ano Fabricação"},{href:"#/servico",desc:"Gerenciar Serviço"},{href:"#/newsletter",desc:"Gerenciar Newsletter"},{href:"#/estilo",desc:"Gerenciar Estilo"},{href:"#/uf",desc:"Gerenciar Uf"},{href:"#/planos",desc:"Gerenciar Plano"}]},{title:"Gerenciar Anúncios",opened:false,contentPanel:false,links:[{href:"#/anuncio/anunciante",desc:"Lista de Anunciantes"},{href:"#/anuncio/list",desc:"Lista de Anúncios"}]},{title:"Relatórios",opened:false,contentPanel:false,links:[{href:"#/anuncio/list",desc:"Relatório Anúncios"},{href:"#/users",desc:"Relatório Usuários"},{href:"#/anuncio/anunciante",desc:"Relatório Anunciantes"}]}];$scope.togglePanel=function(panel){if(panel.opened){panel.opened=false;panel.contentPanel=false}else{panel.opened=true;panel.contentPanel=true}}}]);app.factory("securityInterceptor",function($location,$q,$window){var schema="https://";var host=$location.$$host;var port=$location.$$port;var redirect=schema+host+"/login";return function(promise){return promise.then(function(res){console.log("SUCCESS REQUEST : "+res.status);return res},function(res){console.log("ERROR REQUEST : "+res.status);if(res.status==404||res.status==301){window.location.hash="/error";return}return $q.reject(res)})}});app.config(["$routeProvider","$httpProvider",function($routeProvider,$httpProvider){$httpProvider.interceptors.push("securityInterceptor");$routeProvider.when("/",{templateUrl:"partials/homeAdmin.html",controller:"adminController"});$routeProvider.when("/anoFabricacao",{templateUrl:"partials/anoFabricacao.html",controller:"anoFabricacaoController",resolve:{situacoes:function(utilsService){return utilsService.listarSituacao()}}});$routeProvider.when("/cambio",{templateUrl:"partials/cambio.html",controller:"cambioController",resolve:{situacoes:function(utilsService){return utilsService.listarSituacao()}}});$routeProvider.when("/categoria",{templateUrl:"partials/categoria.html",controller:"categoriaController",resolve:{situacoes:function(utilsService){return utilsService.listarSituacao()}}});$routeProvider.when("/combustivel",{templateUrl:"partials/combustivel.html",controller:"combustivelController",resolve:{situacoes:function(utilsService){return utilsService.listarSituacao()}}});$routeProvider.when("/cor",{templateUrl:"partials/cor.html",controller:"corController",resolve:{situacoes:function(utilsService){return utilsService.listarSituacao()}}});$routeProvider.when("/estilo",{templateUrl:"partials/estilo.html",controller:"estiloController",resolve:{situacoes:function(utilsService){return utilsService.listarSituacao()}}});$routeProvider.when("/marca",{templateUrl:"partials/marca.html",controller:"marcaController",resolve:{situacoes:function(utilsService){return utilsService.listarSituacao()},categorias:function(categoriaService){return categoriaService.findAll()}}});$routeProvider.when("/modelo",{templateUrl:"partials/modelo.html",controller:"modeloController",resolve:{situacoes:function(utilsService){return utilsService.listarSituacao()},marcas:function(marcaService){return marcaService.findAll()}}});$routeProvider.when("/newsletter",{templateUrl:"partials/newsletter.html",controller:"newsletterController",resolve:{situacoes:function(utilsService){return utilsService.listarSituacao()}}});$routeProvider.when("/servico",{templateUrl:"partials/servico.html",controller:"servicoController",resolve:{situacoes:function(utilsService){return utilsService.listarSituacao()}}});$routeProvider.when("/uf",{templateUrl:"partials/uf.html",controller:"ufController",resolve:{situacoes:function(utilsService){return utilsService.listarSituacao()}}});$routeProvider.when("/planos",{templateUrl:"partials/planos.html",controller:"planosController",resolve:{situacoes:function(utilsService){return utilsService.listarSituacao()}}});$routeProvider.when("/anuncio/list",{templateUrl:"partials/listaAnuncios.html",controller:"anuncioController"});$routeProvider.when("/anuncio/anunciante",{templateUrl:"partials/anunciantes.html",controller:"anuncianteController"});$routeProvider.when("/users",{templateUrl:"partials/users.html",controller:"userController"});$routeProvider.otherwise({redirectTo:"#/"})}]);